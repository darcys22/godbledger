time="2020-08-21 09:21:53" level=info msg="File logging initialized"
time="2020-08-21 09:21:53" level=debug msg="Configuration Successfully loaded" Config File="/home/sean/.ledger/config.toml" prefix=Config
time="2020-08-21 09:21:53" level=debug msg="Using MySQL" prefix=ledger
time="2020-08-21 09:21:53" level=debug msg="DB_ADDR := 192.168.1.98:3306" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="DB_NET := tcp" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="DB_DBNAME := ledger" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="DB_USER := godbledger" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="DB_PASSWORD := password" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="PARAMS := map[]" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="ParseTime := true" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Charset := utf8" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="DSN := godbledger:password@tcp(192.168.1.98:3306)/ledger?parseTime=true&charset=utf8" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Initialised database configuration" prefix=ledger
time="2020-08-21 09:21:53" level=info msg="Starting GoDBLedger Server" prefix=node version=0.3.0
time="2020-08-21 09:21:53" level=info msg="Starting 2 services: [*ledger.Ledger *rpc.Service]" prefix=registry
time="2020-08-21 09:21:53" level=debug msg="Starting service type *ledger.Ledger" prefix=registry
time="2020-08-21 09:21:53" level=info msg="Initialising DB Table" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS users (
		user_id VARCHAR(255) NOT NULL,
		username VARCHAR(255) NOT NULL,
		PRIMARY KEY(user_id)
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS accounts (
		account_id VARCHAR(255) NOT NULL,
		name VARCHAR(255) NOT NULL,
		PRIMARY KEY(account_id)
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS tags (
		tag_id INTEGER NOT NULL AUTO_INCREMENT PRIMARY KEY,
		tag_name VARCHAR(100) NOT NULL UNIQUE
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS account_tag (
    account_id VARCHAR(255) NOT NULL,
    tag_id INTEGER NOT NULL,
    FOREIGN KEY (account_id) REFERENCES accounts (account_id) ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags (tag_id) ON DELETE RESTRICT ON UPDATE CASCADE,
    PRIMARY KEY (account_id, tag_id)
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS currencies (
		name VARCHAR(255) NOT NULL,
		decimals INT NOT NULL,
		PRIMARY KEY(name)
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS transactions (
		transaction_id VARCHAR(255) NOT NULL,
		postdate DATETIME NOT NULL,
		brief VARCHAR(255),
		poster_user_id VARCHAR(255),
		PRIMARY KEY(transaction_id),
    FOREIGN KEY (poster_user_id) REFERENCES users (user_id) ON DELETE RESTRICT
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS transactions_body (
		transaction_id VARCHAR(255) NOT NULL,
		body TEXT,
		FOREIGN KEY(transaction_id) REFERENCES transactions(transaction_id) ON DELETE CASCADE
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS transaction_tag (
    transaction_id VARCHAR(255) NOT NULL,
    tag_id INTEGER NOT NULL,
    FOREIGN KEY (transaction_id) REFERENCES transactions (transaction_id) ON DELETE RESTRICT ON UPDATE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags (tag_id) ON DELETE RESTRICT ON UPDATE CASCADE,
    PRIMARY KEY (transaction_id, tag_id)
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS splits (
		split_id VARCHAR(255) NOT NULL,
		split_date DATETIME,
		description VARCHAR(255),
		currency VARCHAR(255),
		amount BIGINT,
		transaction_id VARCHAR(255),
		FOREIGN KEY(transaction_id) REFERENCES transactions(transaction_id) ON DELETE CASCADE,
		PRIMARY KEY(split_id)
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS split_accounts (
		id INT AUTO_INCREMENT PRIMARY KEY,
		split_id VARCHAR(255),
		account_id VARCHAR(255),
		FOREIGN KEY(split_id) REFERENCES splits(split_id) ON DELETE CASCADE,
		FOREIGN KEY(account_id) REFERENCES accounts(account_id) ON DELETE CASCADE
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Query: 
	CREATE TABLE IF NOT EXISTS entities (
		entity_id VARCHAR(255) NOT NULL,
		name VARCHAR(255) NOT NULL,
		tag VARCHAR(255),
		type VARCHAR(255),
		description VARCHAR(255),
		PRIMARY KEY(entity_id)
	);" prefix=MySQL
time="2020-08-21 09:21:53" level=debug msg="Starting service type *rpc.Service" prefix=registry
time="2020-08-21 09:21:53" level=debug msg="Starting service" prefix=rpc
time="2020-08-21 09:21:53" level=info msg="GRPC Listening on port" address="192.168.1.98:50051" prefix=rpc
time="2020-08-21 09:21:53" level=warning msg="You are using an insecure gRPC server. If you are running your GoDBLedger Server and client on the same machine, you can ignore this message." prefix=rpc
time="2020-08-21 09:21:59" level=info msg="New gRPC client connected to GoDBLedger" addr="192.168.1.98:33798" prefix=rpc
time="2020-08-21 09:21:59" level=info msg="Received New Version Request" Request=message:"Test"  prefix=rpc
time="2020-08-21 09:21:59" level=info msg="New gRPC client connected to GoDBLedger" addr="192.168.1.98:33798" prefix=rpc
time="2020-08-21 09:21:59" level=info msg="Received New Version Request" Request=message:"Test"  prefix=rpc
